@using DisplayMonkey
@using DisplayMonkey.Models
@using DisplayMonkey.Language

@model IEnumerable<DisplayMonkey.Models.ContentWithSize>

@{
    ViewBag.Title = "Media";
}

<h2>@ViewBag.Title</h2>

@using (Html.BeginForm("Index", "Media", FormMethod.Get))
{    
    <fieldset><legend>Search</legend><table>
        <tr><td>Media type:</td><td><div class="select">@Html.DropDownList("MediaType", "- Any -")</div></td></tr>
    <tr><td colspan="2"><input type="submit" value="Filter" /></td></tr></table></fieldset> 
}

<p>
    @Html.ActionLink("Upload media", "Upload")
</p>
<table class="grid">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th class="nw">
            @Html.DisplayNameFor(model => model.Type)
        </th>
        <th class="nw">
            @Html.DisplayName("Thumb")
        </th>
        <th class="nw num">
            @Html.DisplayNameFor(model => model.Size), KB
        </th>
        <th class="nw"></th>
    </tr>

@foreach (DisplayMonkey.Models.ContentWithSize item in Model)
{
    <tr>
        <td>         
            @Html.ActionLink(item.Name, "Details", new { id=item.ContentId })
        </td>
        <td class="nw">
            @item.Type.Translate()
        </td>
        <td class="nw">
            @if (item.Type == ContentTypes.ContentType_Picture)
            {
                <img src="@Url.Action("Thumb", "Media", new { id = item.ContentId, width = 50, height = 50, mode = RenderModes.RenderMode_Stretch })" alt="" />
            }
            else if (item.Type == ContentTypes.ContentType_Video)
            {
                <img src="~/images/video_thmb.png" alt="" />
            }
        </td>
        <td class="nw num">
            @Html.DisplayFor(model => item.Size)
        </td>
        <td class="nw">
            @Html.ActionLink("Edit", "Edit", new { id=item.ContentId }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.ContentId })
        </td>
    </tr>
}

</table>
